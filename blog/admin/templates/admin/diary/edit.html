{% extends 'admin/base.html' %}
{% block title %} {% if diary %} Edit Post {% else %} Add New Post {% endif %} {% endblock %}
{% block content %}
<div class="outer">
  <div class="inner">
    <form action="" method="post">
      <div class="row">
        <div class="col-lg-9">
          <br/>
          <p class="lead">{{ self.title() }}</p>
          <div class="box">
            <div class="body tab-content">
              <input type="text" id="title" name="title" placeholder="Enter title here" class="form-control" value="{{ diary.title }}">
            </div>
            <div class="body tab-content form-horizontal">
              <div class="form-group">
                <label for="readonly" class="control-label col-lg-1">Permalink: </label>
                <div class="col-lg-8">
                  <input id="readonly" type="text" value="{{ config['SITE_URL'] }}/" readonly="" class="form-control">
                </div>
                <div class="col-lg-3">
                  <input type="text" id="permalink" name="permalink" placeholder="Enter your define Permalink here" class="form-control" value="{{ diary.permalink }}">
                </div>
              </div>
            </div>
            <header>
              <h5>Markdown Editor</h5>
              <ul class="nav nav-tabs pull-right">
                <li class="active"><a href="#markdown" data-toggle="tab">Markdown</a></li>
                <li><a href="#preview" data-toggle="tab">Preview</a></li>
              </ul>
            </header>
            <div class="body tab-content">
              <div class="tab-pane fade active in" id="markdown">
                <div class="wmd-panel">
                  <div id="wmd-button-bar" class="btn-toolbar"></div>
                  <br/>
                  <textarea name="content" class="form-control wmd-input autosize" rows="10" name="description" id="wmd-input">
                    {{ diary.content }}
                  </textarea>
                </div>
              </div>
              <div class="tab-pane fade" id="preview">
                <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
              </div>
              <br/>
              <div class="form-actions">
                <input type="submit" value="Submit" class="btn btn-primary">
              </div>
            </div>
          </div><!-- /.box -->
        </div><!-- /.col-lg-9 -->
        <div class="col-lg-3">
          <div class="box dark">
            <header>
              <div class="icons">
                <i class="fa fa-list"></i>
              </div>
              <h5>Categories</h5>
            </header>
            <div id="category_list" class="accordion-body body in">
              <input type="hidden" id="checked_categories" value="{% for c in diary.categories %}{{ c }},{% endfor%}">
              {% for c in categories %}
              <div class="checkbox anim-checkbox">
                <input type="checkbox" id="{{ c.pk }}" class="primary" name="categories" value="{{ c.name }}">
                <label for="{{ c.pk }}">{{ c.name }}</label>
              </div>
              {% endfor %}
              <div id="category-adder">
                <h5><a id="category-add-toggle" href="javascript:void(0);">+ Add New Category</a></h5>
                <p id="category-add" class="category-add hide">
                  <input type="text" name="newcategory" id="newcategory" class="form-control">
                  <br/>
                  <a href="javascript:void(0);" class="btn btn-primary btn-sm" id="category-add-submit">Add New Category</a>
                </p>
              </div><!--./category-adder-->
            </div>
          </div><!-- /.box -->
          <div class="box dark">
            <header>
              <div class="icons">
                <i class="fa fa-list"></i>
              </div>
              <h5>Tags</h5>
            </header>
            <div class="accordion-body body in">
              <input name="tags" id="tags" value="{% for t in diary.tags %} {{ t }},{% endfor %}" class="form-control">
            </div>
          </div><!-- /.box -->
        </div><!-- /.col-lg-3 -->
      </div><!-- /.row -->
    </form>
  </div><!-- end .inner -->
</div><!-- end .outer -->
{% endblock %}
{% block script %}
<script>
  $(function() {
    formWysiwyg();
    formGeneral();
    cateChecked();
  });
</script>
{% endblock %}
